{% extends 'base.html' %}
{% load static %}
{% block title %}compare{% endblock %}

{% block content %}
  {% if selected_products %}
    <!-- Display selected products and comparison results side by side -->
    <div class="flex flex-wrap justify-between">
      <!-- Display compared products side by side -->
      {% for product in selected_products %}
        <div class="w-full md:w-1/2 mb-6 "> 
            
        
          <h2 class="text-lg font-semibold mb-4">{{ product.title }}</h2>
          <div class="bg-white p-6 rounded-lg shadow-md">
            <img
              src="{{ product.image.url }}"
              alt="{{ product.title }}"
              class="w-full mb-4 rounded"
            />
            <p class="text-gray-700 mb-2">
              <strong>Category:</strong> {{ product.category.title }}
            </p>
            <p class="text-gray-700 mb-2">
              <strong>Vendor:</strong> {{ product.user }}
            </p>
            <p class="text-gray-700 mb-2">
              <strong>Price:</strong> Rs.{{ product.price }}
            </p>
            <a
              href="{% url 'product_detail' product.pid %}"
              class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-block"
              >Book Now</a
            >
          </div>
        </div>
      {% endfor %}

      <!-- Display comparison results -->
      <div class="w-full md:w-1/2 mb-6">
        {% if comparison_result %}
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-lg font-semibold mb-4">Comparison Result</h2>
            <p class="text-gray-700 mb-2">
              <strong>Price:</strong> {{ comparison_result.price }}
            </p>
           
          </div>
        {% endif %}
      </div>
    </div>

    <!-- Compare Again button -->
    <a
      href="{% url 'compare' %}"
      class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-3 inline-block"
      >Compare Again</a
    >
  {% else %}
    <!-- Display product selection form -->
    <form method="POST">
      {% csrf_token %}
      <div class="flex flex-col md:flex-row p-5 space-y-5 md:space-y-0 md:space-x-5">
        <!-- Left side for selecting the first product -->
        <div class="w-full md:w-1/2">
          <label for="product1" class="block mb-2 font-semibold">Select Product 1:</label>
          <select id="product1" name="selected_product1" class="w-full border rounded px-3 py-2">
            <option value="">Select a product</option>
            {% for product in products %}
              <option value="{{ product.id }}">{{ product.title }}</option>
            {% endfor %}
          </select>
        </div>
        <!-- Right side for selecting the second product -->
        <div class="w-full md:w-1/2">
          <label for="product2" class="block mb-2 font-semibold">Select Product 2:</label>
          <select id="product2" name="selected_product2" class="w-full border rounded px-3 py-2">
            <option value="">Select a product</option>
            {% for product in products %}
              <option value="{{ product.id }}">{{ product.title }}</option>
            {% endfor %}
          </select>
        </div>
      </div>

      <div>
        <button
          type="submit"
          class="ml-5 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-3 inline-block"
        >
          Compare
        </button>
      </div>
    </form>
  {% endif %}
{% endblock %}
